{% extends "base.html" %}

{% block meta %}
{% endblock %}

{% block title %}Devtegrate - Cloud Solutions & Digital Excellence{% endblock %}

{% block content %}
<!-- Main image -->
<div class="ctn-section-header">
    <img class="ctn-img" src="https://images.pexels.com/photos/1181467/pexels-photo-1181467.jpeg" alt="Devtegrate Cloud Technology">
    <div class="secondary-ctn-section-header-ctn">
        <h2 class="reveal__top">Cloud Innovation Hub</h2>
        <p class="reveal__bottom">Transforming Business Through Technology</p>
    </div>
</div>

<!-- Categories Section -->
<div class="text-center my-5">
    <h2 class="display-5 fw-bold">Categories</h2>
    <p class="lead text-muted">Explore our technical expertise</p>
</div>

<section class="container-fluid mt-4">
    <div class="row justify-content-center">
        {% for theme in posts_themes %}
        <div class="col col-auto mb-3 HOME-theme-btn">
            <a class="ALL-no-hover" href="{{ url_for('website.all', index=theme[2]) }}">
                <div class="card h-100" style="width: 13rem; border:none;">
                    {% if theme[1] %}
                        <img src="{{ url_for('static', filename='Pictures_Themes/'+theme[1]) }}" class="card-img-top HOME-round-img" alt="Cloud Services" />
                    {% else %}
                        <img src="{{ url_for('static', filename='Pictures_Themes/default_theme.jpg') }}" class="card-img-top HOME-round-img" alt="Default theme image" />
                    {% endif %}
                    <div class="card-body" style="display:flex; justify-content: center;">
                        <h5 class="card-title ALL-no-hover">{{theme[0]}}</h5>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
</section>

{% for theme_index in range(posts_themes|length) %}
    {% set current_theme = posts_themes[theme_index][0] %}
    <section class="container-fluid mt-4 {% if theme_index % 2 != 0 %}HOME-backg{% endif %}">
        {% if theme_index == 0 %}
            <center><h3>Latest Tech Insights</h3></center><br>
        {% endif %}
        <div class="row justify-content-center">
            {% for post in posts_all %}
                {% if post.theme_group.theme == current_theme %}
                    <div class="col col-auto mb-3">
                        <a class="ALL-no-hover" href="{{ url_for('website.blog_post', index=post.id) }}">
                            <div class="card h-100 HOME-card ALL-post-hover" style="width: {% if theme_index == 3 %}27.9rem{% else %}18rem{% endif %}">
                                {% set post_image = 'Pictures_Posts/default_post_image.jpg' %}
                                {% if post.picture_v %}
                                    {% set post_image = 'Pictures_Posts/' + post.picture_v %}
                                {% elif post.picture_h %}
                                    {% set post_image = 'Pictures_Posts/' + post.picture_h %}
                                {% elif post.picture_s %}
                                    {% set post_image = 'Pictures_Posts/' + post.picture_s %}
                                {% endif %}
                                <img src="{{ url_for('static', filename=post_image) }}" 
                                     class="card-img-top" 
                                     alt="{{ post.picture_alt or 'Blog post image' }}" />
                                
                                {% if theme_index == 3 and post.id in forth_theme_post_ids %}
                                    <div class="card-img-overlay {% if post.id == forth_theme_post_ids[1] %}d-flex flex-column justify-content-end{% endif %}">
                                        <h5 class="card-title HOME-txt-background ALL-no-hover">{{ post.title }}</h5>
                                        <p class="card-text HOME-txt-background ALL-no-hover">by {{ post.author.name }}</p>
                                    </div>
                                {% else %}
                                    <div class="card-body">
                                        <h5 class="card-title ALL-no-hover">{{ post.title }}</h5>
                                    </div>
                                    <div class="card-footer HOME-card-footer">
                                        <small class="text-muted ALL-no-hover">by {{ post.author.name }}</small>
                                    </div>
                                {% endif %}
                            </div>
                        </a>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </section>
{% endfor %}

{% endblock %}
